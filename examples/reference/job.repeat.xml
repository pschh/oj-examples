<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<oddjob>
    <job>
        <folder name=" ">
            <jobs>
                <repeat name="Repeat 10 times">
                    <schedule>
                        <s:count count="10" xmlns:s="http://rgordon.co.uk/oddjob/schedules"/>
                    </schedule>
                    <job>
                        <sequential name="Run in Sequence">
                            <jobs>
                                <sequence id="seq"/>
                                <echo name="Echo to Console">Hello ${seq.current}</echo>
                            </jobs>
                        </sequential>
                    </job>
                </repeat>
                <repeat name="Repeat immediately until complete">
                    <schedule>
                        <s:count count="1" xmlns:s="http://rgordon.co.uk/oddjob/schedules"/>
                    </schedule>
                    <retry>
                        <s:now xmlns:s="http://rgordon.co.uk/oddjob/schedules"/>
                    </retry>
                    <job>
                        <bean class="org.oddjob.samples.RandomTask"/>
                    </job>
                </repeat>
                <state:if state="!COMPLETE" xmlns:state="http://rgordon.co.uk/oddjob/state">
                    <jobs>
                        <repeat exception="${exception}" name="Try 10 times, 1 seconds apart, before alerting">
                            <retry>
                                <s:count count="10" xmlns:s="http://rgordon.co.uk/oddjob/schedules">
                                    <refinement>
                                        <s:interval interval="00:00:01"/>
                                    </refinement>
                                </s:count>
                            </retry>
                            <job>
                                <exists file="dont.exist" name="Check Non Existant File"/>
                            </job>
                        </repeat>
                        <echo id="exception" name="Echo to Console">Help!</echo>
                    </jobs>
                </state:if>
            </jobs>
        </folder>
    </job>
</oddjob>
